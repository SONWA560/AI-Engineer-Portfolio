title: "Croply AI: Integrated Plant Health Analyser for Precision Agriculture"
publishedAt: "2024-10-15"
summary: "A comprehensive, AI-powered agricultural vision system integrating a Raspberry Pi 5-based edge device with TensorFlow Lite and YOLOv8 models for multi-modal, real-time disease, pest, and growth stage detection, supported by a Firebase and Flutter cloud-first architecture."
images:
  - "/images/projects/project-01/crop-vision-system.png"
  - "/images/projects/project-01/Croply.png"

team:
  - name: "Sonwabise Gcolotela"
    role: "IoT Developer & Computer Vision Engineer"
    avatar: "/images/avatar-sonwabise.jpeg"
    linkedIn: "https://www.linkedin.com/in/sonwabise-gcolotela-315b94296/"

link: "https://github.com/SONWA560/Croply_AI"
---

## Overview

This project, **Croply AI**, delivers a complete **AI-powered agricultural vision system** designed to revolutionize early disease and pest detection in precision agriculture. The system, known as the **Integrated Plant Health Analyser**, integrates **optimised deep learning models** with an accessible **Raspberry Pi 5-based IoT edge device** to provide farmers with **real-time, actionable plant health analysis**. It enables **simultaneous detection of plant diseases, pest infestations, and growth stages** using **TensorFlow Lite for disease classification** and **Ultralytics YOLOv8 for object detection**. Results are communicated using **MQTT for real-time alerting** and stored via a **Firebase cloud-native backend**.

The system addresses the critical constraint in modern agriculture where traditional manual inspections are **time-consuming, inconsistent, and difficult to scale**, frequently resulting in **substantially reduced yields** due to late identification of crop health issues.

***

## Problem Statement

Modern agricultural operations face several recurring challenges:

- **Delayed Disease/Pest Detection** frequently results in substantially reduced yields, compromised crop quality, and economic losses.
- **Manual Field Inspections** are temporally inefficient, inconsistent due to human variability, and inherently difficult to scale across larger areas.
- **Expertise Requirement** for accurate identification often exceeds the capabilities of individual farmers, particularly in resource-limited contexts.
- **Limited Data Infrastructure** prevents the provision of real-time, comprehensive monitoring capabilities demanded by precision agriculture.

The goal was to leverage the emergence of **affordable edge computing devices like the Raspberry Pi 5** to build an integrated system that brings professional-grade AI vision capabilities directly to agricultural practitioners.

***

## Methodology

### System Architecture
![System Architecture Diagram](/images/projects/project-01/Croply_AI_System_Architecture.drawio.png)
The Croply AI system employs a sophisticated, **three-tier cloud-first architecture** designed around cloud-native principles while maintaining robust **local processing capabilities**.

The architecture comprises three interconnected layers:
1.  **Edge/IoT Layer (Raspberry Pi 5):** Provides local image capture and on-device analysis.
2.  **Application Layer (PySide6 & Flutter):** Provides user interfaces across platforms (desktop GUI on the Pi and mobile app).
3.  **Backend/Firebase Layer:** Enables persistent storage, authentication, and cloud-based processing orchestration.

#### Edge Tier (Raspberry Pi 5)
- The edge device is constructed around the **Raspberry Pi 5 (8GB)** platform.
- **High-quality image capture** is performed by the **Raspberry Pi Camera Module 3**.
- **On-Device Inference** is executed locally using **TensorFlow Lite** (disease classification) and **YOLOv8** (pest/growth stage detection).
- **Local Caching and Buffering** is implemented to maintain data queues during network connectivity interruptions.

#### Communication Layer
- **MQTT** serves as the protocol for **real-time alerting** and integration with broader IoT agricultural networks.
- The `paho-mqtt` library manages secure message publication.
- Analysis results are transmitted as **JSON-formatted messages**.

#### Backend Tier
- **Firebase** provides the centralised cloud backbone for the system.
- **Firebase Authentication** manages secure user credentials and token-based session management.
- **Firebase Storage** provides secure, scalable storage for crop images, organised by a date-based directory structure (e.g., `plant-analysis/YYYYMMDD/crop_ID/filename.jpg`).
- **Firestore Database** stores structured data like user profiles and analysis records, supporting **real-time synchronisation** and **offline capabilities**.
- **Google Cloud Functions** provide serverless backend logic for authentication validation, **image processing orchestration**, and **real-time notification publishing**.

***

### AI Model Layer Architecture
![Plant Growth Stage Model] (/images/projects/project-01/plant_growth_stages.jpg)
! [Disease Detection Model] (/images/projects/project-01/disease_detection.jpg)
The system uses three specialised deep learning models optimised for deployment on the **Raspberry Pi 5** edge device:

| Model | Purpose | Technology | Accuracy/Performance | Optimization Techniques |
| :--- | :--- | :--- | :--- | :--- |
| **Disease Detection** | Identifies plant diseases from visual characteristics. | **TensorFlow Lite (Classification)** | **91.5%** classification accuracy; **0.23 seconds** inference latency. | **Quantisation** (32-bit float to **8-bit integer**) and **Pruning**. |
| **Pest Detection** | Identifies pest instances, generating bounding box coordinates. | **Ultralytics YOLOv8 (Object Detection)** | **87.2%** average precision; **0.17 seconds** typical inference latency. | Architecture optimized for edge deployment. |
| **Growth Stage Detection** | Estimates plant developmental stages for optimal intervention timing. | **Ultralytics YOLOv8 (Classification)** | **89.3%** classification accuracy; **0.19 seconds** inference latency. | - |

***

## Operational Workflow

The Croply AI system executes a well-defined workflow to transform captured images into actionable farmer recommendations:

1.  **Image Capture:** The **PiCamera2** module continuously streams live video frames.
2.  **Preprocessing:** Images are resized (e.g., to **224x224 pixels** for classification models) and normalised using **OpenCV** and **NumPy**.
3.  **Inference:** The appropriate AI model executes based on the user-selected mode (disease, pest, or growth stage).
4.  **Temporal Result Stabilisation:** A **moving average filter** is applied across multiple frames to stabilise predictions and reduce false positives.
5.  **Recommendation Generation:** **Rule-based inference engines** translate raw model outputs into practical guidance, such as fungicide type or pest control strategies.
6.  **Cloud Image Upload:** The analysed image is uploaded to **Firebase Storage**.
7.  **MQTT Message Publication:** Analysis results are published as **JSON-structured MQTT messages** to the configured IoT broker for real-time alerts.
8.  **Result Display/Persistence:** Results display in the **PySide6 desktop GUI** and are cached locally before automatic synchronisation to **Firestore**.

***

## Technologies and Tools

- **Edge Hardware**: **Raspberry Pi 5 (8GB)**, **Raspberry Pi Camera Module 3**.
- **AI Frameworks**: **TensorFlow Lite**, **Ultralytics YOLOv8**.
- **IoT Protocols**: **MQTT**, `paho-mqtt`.
- **Programming Languages**: Python, Dart (for Flutter).
- **Data Management**: **Firebase Storage SDK**, **Firestore SDK**, **Google Cloud Functions**.
- **User Interfaces**: **PySide6 (Qt)** for Desktop GUI, **Flutter** for Mobile Application.
- **Image Processing**: **OpenCV**, **NumPy**, **PiCamera2**.
- **Optimization**: **INT8 Quantisation**, Model Pruning.

***

## Industry Applications

The agricultural vision system has broad applicability across several domains:

- **Precision Agriculture**: Automated health and growth analysis.
- **Smart Greenhouses**: Environmental control and crop monitoring.
- **Agricultural Research**: Disease pattern tracking and growth analytics.
- **Agronomic Decision Support**: Evidence-based guidance on fertiliser application, pest pressure management, and harvest scheduling.

---

This project, **Croply AI**, demonstrates practical expertise in **AI, IoT, and cloud-native systems**, showcasing how **edge AI** can transform agricultural monitoring through **multi-modal real-time intelligence** (disease, pest, and growth stage), efficiency, and scalability via a **cloud-first architecture**.